<!--pages/update/update.wxml-->
<cu-custom bgColor="bg-gradual-blue" isBack="{{true}}">
	<view slot="backText">返回</view>
	<view slot="content">发布闲置</view>
</cu-custom>
<view class="page">
  <form bindsubmit='uploadPost'>

    <!--分类-->
    <view class='sell_cells'>
      <view class="sell_cell">
        <text class="sell_title">分类</text>
        <picker name="goods_type" style="flex:1;display:flex;justify-content:flex-end" bindchange="bindPickerChange" value="{{type_index}}" range="{{types}}">
          <text class="sell_select">{{goods_type!=""?goods_type:"请选择闲置物品分类"}}</text>
        </picker>
      </view>
    </view>
    <!---->

    <!--校区-->
    <view class='sell_cells'>
      <view class="sell_cell">
        <text class="sell_title">校区</text>
        <picker name="goods_region" style="flex:1;display:flex;justify-content:flex-end" bindchange="bindRegionChange" value="{{region_index}}" range="{{regions}}">
          <text class="sell_select">{{goods_region!=""?goods_region:"请选择闲置物品所在校区"}}</text>
        </picker>
      </view>
    </view>
    <!---->

    <!--标题和描述-->
    <view class="sell_cells">
      <view class="sell_cell" style="border-bottom:1px solid #e2e2e2">
        <text class="sell_title">标题</text>
        <input name="post_title" class="sell_input" placeholder="请输入您的商品名称（不超过15个字）" placeholder-class='placeholder' maxlength='15' />
      </view>

      <view class="sell_cell" style="align-items: flex-start">
        <text class="sell_title">描述</text>
        <textarea name="goods_content" class="sell_input" placeholder="请简要的描述一下您的商品，新旧程度、出售原因等（文字不超过140个字，附图不超过3张）" placeholder-class='placeholder' maxlength='140' bindinput='bindInput'></textarea>
      </view>

      <!--字数提示，超过130字变红-->
      <view class="sell_cell" style="justify-content:flex-end">
        <view wx:if="{{inputLength>130}}">
          <text class="sell_hint_text">{{inputLength}}</text>
          <text class="sell_text">/140</text>
        </view>
        <view wx:else>
          <text class="sell_text">{{inputLength}}/140</text>
        </view>
      </view>
      <!---->

      <!--上传图片-->
      <view class="sell-cell_uploader">
        <view class="sell_uploader_imgbox" wx:for="{{images}}" wx:key="*this">
          <image class="sell_uploader_img" src="{{item}}"  data-index="{{index}}" bindtap="handleImagePreview" mode="aspectFill" ></image>
          <image class="sell_uploader_img_del" bindtap="removeImage" data-index="{{index}}" src="/images/x.png"/>
        </view>
        <view class="sell_uploader_box">
          <view class="sell_uploader_input" bindtap="chooseImage"></view>
        </view>
        
      </view>
      <!---->
    </view>
    <!---->

    <!--价格和原价-->
    <view class='sell_cells'>
      <view class="sell_cell" style="border-bottom:1px solid #e2e2e2">
        <text class="sell_title">价格</text>
        <input name="goods_price" class="sell_input price" type="number" placeholder="￥0.00" placeholder-class='placeholder' maxlength='5' />/////xdff//
      </view>

      <view class="sell_cell">
        <text class="sell_title">原价</text>
        <input name="oriPrice" class="sell_input price" type="number" placeholder="￥0.00" placeholder-class='placeholder' maxlength='5' />
      </view>
    </view>
    <!---->

    <button class="sell_btn" form-type='submit'>确认发布</button>

    <!--模态窗口-->
    <view class="cu-modal {{modalName=='Modal'?'show':''}}">
      <view class="cu-dialog">
        <view class="cu-bar bg-white justify-end">
          <view class="content">提示</view>
          <view class="action" bindtap="hideModal">
            <text class="cuIcon-close text-red"></text>
          </view>
        </view>
        <view class="padding-xl">
          {{warning}}
        </view>
      </view>
    </view>
  </form>
</view>